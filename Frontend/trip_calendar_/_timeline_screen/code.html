<!DOCTYPE html>

<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>GlobeTrotter - Trip Timeline</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#714b67",
                        "background-light": "#f7f7f7",
                        "background-dark": "#1b171a",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        /* Custom Scrollbar for Glassmorphism feel */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(113, 75, 103, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(113, 75, 103, 0.8);
        }

        .glass-panel {
            background: rgba(30, 30, 30, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .glass-button {
            background: rgba(113, 75, 103, 0.8);
            box-shadow: 0 0 15px rgba(113, 75, 103, 0.4);
        }

        .glass-button:hover {
            background: rgba(113, 75, 103, 1);
            box-shadow: 0 0 20px rgba(113, 75, 103, 0.6);
        }

        /* Timeline Connector */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 2rem;
            bottom: -1rem;
            left: 50%;
            width: 2px;
            background: linear-gradient(to bottom, rgba(113, 75, 103, 0.5), rgba(113, 75, 103, 0.1));
            transform: translateX(-50%);
            z-index: 0;
        }

        .timeline-line:last-child::before {
            display: none;
        }
    </style>
</head>

<body
    class="font-display bg-background-dark text-white min-h-screen overflow-x-hidden selection:bg-primary selection:text-white">
    <!-- Background Image -->
    <div class="fixed inset-0 z-0">
        <div class="absolute inset-0 bg-gradient-to-br from-[#151415] via-[#1b171a] to-[#2a1f26] opacity-90 z-10"></div>
        <div class="w-full h-full bg-cover bg-center opacity-40 grayscale-[20%]"
            data-alt="Dark moody panoramic view of Paris skyline with Eiffel Tower at night"
            style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBnitOgoZsM-oq-uyHWgiQg77J7vJpQJopyyqWqWVj97zkkcmKOjqszjfLY1tGrjMTAlBqMZgY3sxAmFI_pcwEGVuZMofpdgf_Gsz-iEo5wt0sdpjXsZfCQiuNvnzDPjmQLQ2_-BbMC86oqXupPmJqOuDQadVnqPMNNfmhCR6AA4lxBFhGNnIrk3MLyadX-o2wHUTg9yJ9_NRH5R8d9OTfOZX4yfwjdRZGS_KKYQ4U9ELg7ghrvVvYJaWfo1Ch9DsyFC18B18UWQKFL');">
        </div>
    </div>
    <div class="relative z-10 flex flex-col h-screen">
        <!-- Navbar -->
        <header
            class="flex items-center justify-between whitespace-nowrap border-b border-white/10 bg-[#151415]/70 backdrop-blur-xl px-10 py-3 sticky top-0 z-50">
            <div class="flex items-center gap-8">
                <div class="flex items-center gap-4 text-white">
                    <div class="size-8 text-primary">
                        <span class="material-symbols-outlined text-3xl">public</span>
                    </div>
                    <h2 class="text-white text-xl font-bold leading-tight tracking-[-0.015em]">GlobeTrotter</h2>
                </div>
                <label class="hidden md:flex flex-col min-w-40 !h-10 max-w-64">
                    <div class="flex w-full flex-1 items-stretch rounded-xl h-full glass-panel">
                        <div
                            class="text-[#aea7ac] flex border-none bg-transparent items-center justify-center pl-4 rounded-l-xl border-r-0">
                            <span class="material-symbols-outlined text-[20px]">search</span>
                        </div>
                        <input
                            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-white focus:outline-0 focus:ring-0 border-none bg-transparent focus:border-none h-full placeholder:text-[#aea7ac] px-4 rounded-l-none border-l-0 pl-2 text-sm font-normal leading-normal"
                            placeholder="Search trips..." value="" />
                    </div>
                </label>
            </div>
            <div class="flex flex-1 justify-end gap-8">
                <div class="hidden lg:flex items-center gap-9">
                    <a class="text-[#aea7ac] hover:text-white text-sm font-medium transition-colors"
                        href="#">Dashboard</a>
                    <a class="text-white text-sm font-medium" href="#">Trips</a>
                    <a class="text-[#aea7ac] hover:text-white text-sm font-medium transition-colors"
                        href="#">Explore</a>
                    <a class="text-[#aea7ac] hover:text-white text-sm font-medium transition-colors"
                        href="#">Community</a>
                </div>
                <div class="flex gap-3">
                    <button
                        class="flex items-center justify-center rounded-full size-10 glass-panel hover:bg-white/10 transition-colors text-white">
                        <span class="material-symbols-outlined text-[20px]">notifications</span>
                    </button>
                    <button
                        class="flex items-center justify-center rounded-full size-10 glass-panel hover:bg-white/10 transition-colors text-white">
                        <span class="material-symbols-outlined text-[20px]">settings</span>
                    </button>
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-primary cursor-pointer"
                        data-alt="User avatar profile picture of a woman"
                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCiq5Xox3_zamWEErr_UA9k9snuIbvq1bzckcYFov6sl-ZZOU86BzWs-kJDrZINyiGSvOpzN7KFczxdxZJMjH-16S-ns7fZTYKo-DN7NPxhsmbSYE8VhGVXuXl2RwS_QGNfWdUMnQ67-yFA_CAuzBWvp8UY5GeAqaubugxcy8JHcEdJsSx6MesoqA_NximvJjCC014k8HCJ3ByeDbdkl1HQis8E3SkrKXFV6zHfMZcmtgSl6VGE-tNElBjK8NiezaGVD8Uf1nn3U-G4");'>
                    </div>
                </div>
            </div>
        </header>
        <!-- Main Content Layout -->
        <div class="flex flex-1 overflow-hidden">
            <!-- Left Content: Timeline & Calendar -->
            <main class="flex-1 flex flex-col overflow-y-auto min-w-0">
                <!-- Page Header & Controls -->
                <div class="px-8 py-6 pb-2">
                    <div class="glass-panel rounded-2xl p-6 mb-6">
                        <div class="flex flex-col md:flex-row justify-between gap-6 items-start md:items-center">
                            <div class="flex flex-col gap-2">
                                <div class="flex items-center gap-3">
                                    <h1 id="trip-title"
                                        class="text-white text-3xl md:text-4xl font-extrabold tracking-tight">--</h1>
                                    <span id="trip-status"
                                        class="px-2.5 py-0.5 rounded-full bg-green-500/20 text-green-400 text-xs font-bold border border-green-500/30">PLANNING</span>
                                </div>
                                <div class="flex items-center gap-4 text-[#aea7ac]">
                                    <div class="flex items-center gap-1.5">
                                        <span class="material-symbols-outlined text-lg">calendar_today</span>
                                        <span id="trip-dates" class="text-sm font-medium">--</span>
                                    </div>
                                    <div class="w-1 h-1 rounded-full bg-[#aea7ac]"></div>
                                    <div class="flex items-center gap-1.5">
                                        <span class="material-symbols-outlined text-lg">location_on</span>
                                        <span id="trip-location" class="text-sm font-medium">--</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-4">
                                <!-- Avatar Group -->
                                <div class="flex -space-x-3">
                                    <div class="w-10 h-10 rounded-full border-2 border-[#2a1f26] bg-gray-700 bg-cover bg-center"
                                        data-alt="Traveler avatar 1"
                                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAL1bMzik44XX41JptZAeYLCfzKEgNkmoJ1Lslp3vojOEAT0X4qyknA0biWDCgnmU6Os9KCw-lgepUJjpTNi5IXOm-a9RvmI2PbYNDnthFh9xewbTYOFz-PLHrue_FRRmR4KcZSwytEAqNuLGS1BQOlxJ0uSAQG4aY0caPpkz-gB7whmJLtgxJwnT1SxZq4UJivWEMWSztoLXmeHgJYoajquIMZ1eXLF8a1u35hCtcCAkD1uhV6k5dgM8pT3k--BFCHwm22svNHwC0x");'>
                                    </div>
                                    <div class="w-10 h-10 rounded-full border-2 border-[#2a1f26] bg-gray-700 bg-cover bg-center"
                                        data-alt="Traveler avatar 2"
                                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB8_uN99hXv8SdT-mR6x16oLmUcWJIF04XWmtPUQcsFmIhytcmRlkhL6IHyUQkZcYFzs8ivIIipQNggwgpLcoILAbfnmGtf_r9VmX0a8VI9J5gl8DmaUN7Nf8Dtd-jIEAd1PP_y5Kluz3mDspXXpcPX4clXItcyfIgqt_R5ZMF8ds453gVfmTaZVgInoMsZSNCBOIT5DWD50_N97VzRON4FhEgutaa5wxMehcvoaJVvZtlZHPcNNOZZ7OybhW0_BUlGoCpnTcCHwYEe");'>
                                    </div>
                                    <div class="w-10 h-10 rounded-full border-2 border-[#2a1f26] bg-gray-700 bg-cover bg-center"
                                        data-alt="Traveler avatar 3"
                                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBq35hC7CvztJHrJY8ucAx8SeERMrKmzl1m_Tui9Qu0wkz_XuQkEkfZFoFarCiUjkB6rjJaxLjsatXthIu6TCX6J5DkLlr5VA61d4GAMikhfz2vSHFU8SwEDTLuWE-ENFxWpwNniU-EI9q-DmrOcnpHAob_FHLuxYQ-wXfapvRH3HdDZdgrNXdD-9Kltk0S-l857XbJyGaCS8FVSExWT5uJb0Tj7FTJXSNnpJx2oxjO2tzVmE-UYCBZFYjWzsgp4uUWQkqSzzum9NuC");'>
                                    </div>
                                    <button
                                        class="w-10 h-10 rounded-full border-2 border-[#2a1f26] bg-[#322f31] flex items-center justify-center text-white hover:bg-primary transition-colors">
                                        <span class="material-symbols-outlined text-sm">add</span>
                                    </button>
                                </div>
                                <button
                                    class="glass-button flex items-center justify-center rounded-xl h-10 px-4 text-white text-sm font-bold gap-2 transition-transform active:scale-95">
                                    <span class="material-symbols-outlined text-lg">edit</span>
                                    <span>Edit</span>
                                </button>
                            </div>
                        </div>
                        <!-- Divider -->
                        <div class="h-px bg-white/10 my-6"></div>
                        <!-- Controls Row -->
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <!-- View Switcher -->
                            <div class="flex p-1 glass-panel rounded-xl bg-black/20">
                                <label
                                    class="cursor-pointer flex items-center justify-center px-4 py-1.5 rounded-lg text-[#aea7ac] hover:text-white transition-colors">
                                    <input class="hidden" name="view" type="radio" />
                                    <span class="text-sm font-medium">Calendar</span>
                                </label>
                                <label
                                    class="cursor-pointer flex items-center justify-center px-4 py-1.5 rounded-lg bg-primary text-white shadow-md transition-all">
                                    <input checked="" class="hidden" name="view" type="radio" />
                                    <span class="text-sm font-medium">Timeline</span>
                                </label>
                            </div>
                            <!-- Date Navigation (Simplified for Horizontal Space) -->
                            <div class="flex items-center gap-2">
                                <button
                                    class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 text-white transition-colors">
                                    <span class="material-symbols-outlined text-xl">chevron_left</span>
                                </button>
                                <div id="date-nav-container" class="flex gap-2 text-white">
                                    <!-- Date buttons injected by JS -->
                                </div>
                                <button
                                    class="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white/10 text-white transition-colors">
                                    <span class="material-symbols-outlined text-xl">chevron_right</span>
                                </button>
                            </div>
                            <!-- Filter -->
                            <button
                                class="flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-white/5 text-[#aea7ac] hover:text-white transition-colors">
                                <span class="material-symbols-outlined text-lg">filter_list</span>
                                <span class="text-sm font-medium">Filter</span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Timeline Content -->
                <div class="px-8 pb-10 max-w-5xl">
                    <div id="timeline-container" class="flex flex-col gap-0">
                    </div>
                    <!-- Add Button -->
                    <div class="flex pb-12">
                        <div class="w-20"></div>
                        <div class="relative flex flex-col items-center w-8 z-10">
                            <div class="w-3 h-3 rounded-full bg-white/20 ring-4 ring-[#2a1f26] mt-2.5"></div>
                        </div>
                        <div class="flex-1 pl-6">
                            <button
                                class="w-full h-12 rounded-xl border-2 border-dashed border-white/20 text-[#aea7ac] hover:text-white hover:border-primary hover:bg-primary/10 transition-all flex items-center justify-center gap-2 text-sm font-bold">
                                <span class="material-symbols-outlined">add_circle</span>
                                Add Activity
                            </button>
                        </div>
                    </div>
                </div>
        </div>
        </main>
        <!-- Right Sidebar: Bucket List / Unscheduled -->
        <aside class="w-80 border-l border-white/10 hidden xl:flex flex-col bg-[#151415]/60 backdrop-blur-xl">
            <div class="p-5 border-b border-white/10 flex justify-between items-center">
                <h3 class="text-white font-bold text-lg">Bucket List</h3>
                <button class="text-primary hover:text-white transition-colors">
                    <span class="material-symbols-outlined">add</span>
                </button>
            </div>
            <div class="p-5 flex-1 overflow-y-auto flex flex-col gap-4">
                <p class="text-[#aea7ac] text-xs font-medium uppercase tracking-wider mb-2">Unscheduled Ideas</p>
                <!-- Draggable Card 1 -->
                <div
                    class="glass-card p-3 rounded-xl cursor-grab active:cursor-grabbing group hover:bg-white/5 transition-colors">
                    <div class="flex gap-3">
                        <div class="w-16 h-16 rounded-lg bg-cover bg-center shrink-0" data-alt="Eiffel Tower view"
                            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDyYzV8XIOmuhZe5D2kwNK8T84jekqdwhtpFu9hQf3Yq2mZlHLODBycA73MekbBPkBA2soRxDRxi0XLl_p5EGZVPhjnGsDz-8dLj6CWnOoQis8RNzfiNqP_Jwz33f4dv8BCpj5JLwSmphKbYt3qdHKevaQhq5yjaPjmn8MHMk9wS-_RgyJeg5gHRB1X2uCf6T8POb57hTP17gk4tT2CfnczNnt87IOLwQpZX8KQQmNuX1e2m657DTzMtrnQyiFbRSc463TGPtRhIBSh");'>
                        </div>
                        <div class="flex-1 min-w-0 flex flex-col justify-center">
                            <h4 class="text-white font-bold text-sm leading-tight mb-1">Seine River Cruise</h4>
                            <span class="text-xs text-[#aea7ac]">Sightseeing</span>
                        </div>
                    </div>
                </div>
                <!-- Draggable Card 2 -->
                <div
                    class="glass-card p-3 rounded-xl cursor-grab active:cursor-grabbing group hover:bg-white/5 transition-colors">
                    <div class="flex gap-3">
                        <div class="w-16 h-16 rounded-lg bg-cover bg-center shrink-0" data-alt="Montmartre street"
                            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB0Zm-sEqkGM1H3xe3n9XI-ibD23v1pD__cQxvZq2V3MWgaNHnUlXlUa89tw8TQA4QWngdGofI8wkTS4d1VNQpypiVwQy7AvzUNUHGzMsuUodfyfVQ3LOibmPylzlQCIlDqffTlEaHKGJlV6ZxqsI6DSrHzT_4GaE2UNXOiAhaj9F9ZZi9LgKUogkIWTwmnrqGW3MVLDmlLacSwoWJ1Kr9ykLWnkWEqiv9hTEsMuPypiqV82AEyXxU9n85-qcXlQUXg3t9K1-3Lw23F");'>
                        </div>
                        <div class="flex-1 min-w-0 flex flex-col justify-center">
                            <h4 class="text-white font-bold text-sm leading-tight mb-1">Montmartre Walk</h4>
                            <span class="text-xs text-[#aea7ac]">Walking Tour</span>
                        </div>
                    </div>
                </div>
                <!-- Draggable Card 3 -->
                <div
                    class="glass-card p-3 rounded-xl cursor-grab active:cursor-grabbing group hover:bg-white/5 transition-colors">
                    <div class="flex gap-3">
                        <div class="w-16 h-16 rounded-lg bg-cover bg-center shrink-0"
                            data-alt="Macarons in a shop window"
                            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB9MIWXhRHT5bFv0I6ijfD6v-0xdNGk-B-Po-DvSfluKizGMkhxb0WP-ytF-lnxhdqWLnQvcPtfbHS5dOiSi3yoRLPk9VR99uEJi7h78Kcmd1UcI0H4SPRKcVsCN-_bz7WBTZZIx0fWapvlTq-rG8ChxlQnQDoxdpwnRjhnWc3kc5PYiSPsVXAz8xABeelvSWiBXvTJ3sorNUwMFqeByr1tKA40ENvEgJUO_wcyseNcV91pTVAXg8-X_9wDkTYKOkhrLuBnXyiQ9vFQ");'>
                        </div>
                        <div class="flex-1 min-w-0 flex flex-col justify-center">
                            <h4 class="text-white font-bold text-sm leading-tight mb-1">Ladur√©e Pastries</h4>
                            <span class="text-xs text-[#aea7ac]">Food &amp; Drink</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4 p-4 rounded-xl border border-dashed border-white/10 bg-white/5 text-center">
                    <span class="material-symbols-outlined text-[#aea7ac] mb-2">bookmark_add</span>
                    <p class="text-sm text-[#aea7ac]">Drag items here to save them for later</p>
                </div>
            </div>
            <!-- Mini Month View (Optional Integration of CalendarPicker style) -->
            <div class="p-5 border-t border-white/10">
                <div class="glass-panel rounded-xl p-3">
                    <div class="flex justify-between items-center mb-3 px-1">
                        <span class="text-sm font-bold text-white">August 2024</span>
                        <div class="flex gap-1">
                            <span
                                class="material-symbols-outlined text-sm text-[#aea7ac] cursor-pointer">chevron_left</span>
                            <span
                                class="material-symbols-outlined text-sm text-[#aea7ac] cursor-pointer">chevron_right</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-1 text-center text-[10px] text-[#aea7ac]">
                        <div>S</div>
                        <div>M</div>
                        <div>T</div>
                        <div>W</div>
                        <div>T</div>
                        <div>F</div>
                        <div>S</div>
                        <!-- Simple grid fill for visual -->
                        <div class="py-1">28</div>
                        <div class="py-1">29</div>
                        <div class="py-1">30</div>
                        <div class="py-1">31</div>
                        <div class="py-1">1</div>
                        <div class="py-1">2</div>
                        <div class="py-1">3</div>
                        <div class="py-1">4</div>
                        <div class="py-1">5</div>
                        <div class="py-1">6</div>
                        <div class="py-1">7</div>
                        <div class="py-1">8</div>
                        <div class="py-1">9</div>
                        <div class="py-1">10</div>
                        <div class="py-1">11</div>
                        <div class="py-1 rounded-full bg-primary text-white">12</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">13</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">14</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">15</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">16</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">17</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">18</div>
                        <div class="py-1 rounded-full bg-primary/40 text-white">19</div>
                        <div class="py-1">20</div>
                        <div class="py-1">21</div>
                        <div class="py-1">22</div>
                        <div class="py-1">23</div>
                        <div class="py-1">24</div>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    <!-- FAB for Mobile/Small screens -->
    <button
        class="xl:hidden fixed bottom-6 right-6 size-14 rounded-full bg-primary text-white shadow-lg shadow-primary/40 flex items-center justify-center z-50 hover:scale-110 transition-transform">
        <span class="material-symbols-outlined text-2xl">add</span>
    </button>
    </div>
</body>
<script>
    const API_BASE = 'http://127.0.0.1:8000';
    const urlParams = new URLSearchParams(window.location.search);
    const TRIP_ID = urlParams.get('trip_id') || 1;
    const getAuthHeaders = () => {
        const token = localStorage.getItem('access_token');
        return token ? { 'Authorization': `Bearer ${token}` } : {};
    };

    async function fetchData() {
        try {
            // Fetch Trip Details
            const tripRes = await fetch(`${API_BASE}/trips/${TRIP_ID}`, { headers: getAuthHeaders() });
            const trip = await tripRes.json();

            document.getElementById('trip-title').textContent = trip.title;
            document.getElementById('trip-status').textContent = (trip.status || 'PLANNING').toUpperCase();
            document.getElementById('trip-dates').textContent = `${new Date(trip.start_date).toLocaleDateString()} - ${new Date(trip.end_date).toLocaleDateString()}`;
            document.getElementById('trip-location').textContent = trip.destination;

            // Fetch Timeline
            const timelineRes = await fetch(`${API_BASE}/trips/${TRIP_ID}/timeline`, { headers: getAuthHeaders() });
            const timeline = await timelineRes.json();

            renderDateNav(timeline.days);
            renderTimeline(timeline.days);

        } catch (err) { console.error(err); }
    }

    function renderDateNav(days) {
        const container = document.getElementById('date-nav-container');
        container.innerHTML = '';
        const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

        days.forEach(day => {
            const date = new Date(day.date);
            const isSelected = day.day_number === 1; // Default select first day
            const btnClass = isSelected
                ? 'glass-panel border-primary bg-primary/20 text-white'
                : 'hover:bg-white/5 transition-colors text-[#aea7ac]';

            const html = `
                <button onclick="scrollToDay(${day.day_number})" class="flex flex-col items-center justify-center w-12 h-14 rounded-xl ${btnClass}">
                    <span class="text-[10px] font-bold uppercase opacity-70">${weekdays[date.getDay()]}</span>
                    <span class="text-lg font-bold">${date.getDate()}</span>
                </button>
            `;
            container.innerHTML += html;
        });
    }

    function scrollToDay(dayNum) {
        const el = document.getElementById(`day-${dayNum}`);
        if (el) el.scrollIntoView({ behavior: 'smooth' });
    }

    function renderTimeline(days) {
        const container = document.getElementById('timeline-container');
        container.innerHTML = '';

        days.forEach(day => {
            const dateStr = new Date(day.date).toLocaleDateString(undefined, { weekday: 'short', month: 'short', day: 'numeric' });

            // Header
            let html = `
                <div id="day-${day.day_number}" class="sticky top-0 z-20 pt-2 pb-6 backdrop-blur-sm bg-background-dark/0">
                    <h3 class="text-white text-xl font-bold flex items-center gap-3">
                        <span>${day.title || 'Day ' + day.day_number}</span>
                        <span class="text-sm font-normal text-[#aea7ac] bg-white/5 px-2 py-1 rounded-md">${dateStr}</span>
                    </h3>
                </div>
            `;

            // Stops
            day.stops.forEach(stop => {
                html += `
                    <div class="flex group timeline-line relative pb-8">
                        <div class="w-20 pt-2 flex flex-col items-end pr-4 text-right">
                             <span class="text-white font-bold text-sm">${new Date(stop.arrival_date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>
                        </div>
                        <div class="relative flex flex-col items-center w-8 z-10">
                             <div class="w-3 h-3 rounded-full bg-white ring-4 ring-[#2a1f26] mt-2.5"></div>
                        </div>
                        <div class="flex-1 pl-6">
                            <div class="glass-card rounded-xl p-4 flex gap-4 items-start">
                                <div class="flex-1 min-w-0">
                                    <h4 class="text-white font-bold text-lg mb-1">Stop: ${stop.city_name}</h4>
                                     <p class="text-[#aea7ac] text-sm flex items-center gap-1 mb-2">
                                        <span class="material-symbols-outlined text-sm">location_on</span> ${stop.city_name}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            // Activities
            day.activities.forEach(act => {
                html += `
                    <div class="flex group timeline-line relative pb-8">
                        <div class="w-20 pt-2 flex flex-col items-end pr-4 text-right">
                             <span class="text-white font-bold text-sm">${act.time || '--:--'}</span>
                        </div>
                        <div class="relative flex flex-col items-center w-8 z-10">
                             <div class="w-3 h-3 rounded-full bg-primary ring-4 ring-[#2a1f26] mt-2.5"></div>
                        </div>
                        <div class="flex-1 pl-6">
                            <div class="glass-card rounded-xl p-4 flex gap-4 items-start hover:border-primary/50">
                                <div class="size-10 rounded-full bg-primary/20 flex items-center justify-center text-primary shrink-0">
                                     <span class="material-symbols-outlined">local_activity</span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <h4 class="text-white font-bold text-lg mb-1">${act.description}</h4>
                                     <div class="flex gap-2">
                                        <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-white/10 text-gray-300 border border-white/10">${act.category || 'ACTIVITY'}</span>
                                        <span class="text-xs text-gray-400 self-center">$${act.cost}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML += html;
        });
    }

    window.addEventListener('load', fetchData);
</script>

</html>